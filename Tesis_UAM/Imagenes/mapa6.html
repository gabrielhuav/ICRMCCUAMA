<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mapa Conceptual 6: Art√≠culos que Incorporan Modelos de Lenguaje</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 15px;
            overflow: hidden;
        }

        .mindmap-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 25px 45px rgba(0, 0, 0, 0.2);
            padding: 25px;
            width: 100%;
            height: 100%;
            max-width: 1700px;
            max-height: 950px;
            position: relative;
            backdrop-filter: blur(15px);
            display: flex;
            flex-direction: column;
        }

        .header {
            text-align: center;
            margin-bottom: 15px;
            z-index: 10;
            position: relative;
        }

        .header h1 {
            font-size: 26px;
            color: #2c3e50;
            margin-bottom: 5px;
            font-weight: 700;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header .subtitle {
            font-size: 15px;
            color: #7f8c8d;
            font-weight: 500;
        }

        .mindmap-content {
            flex: 1;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* SVG para las l√≠neas conectivas */
        .connections-svg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .connection-line {
            stroke: #b19cd9;
            stroke-width: 4;
            fill: none;
            opacity: 0.7;
            stroke-dasharray: 12,6;
            animation: dashFlow 3s linear infinite;
        }

        @keyframes dashFlow {
            0% { stroke-dashoffset: 0; }
            100% { stroke-dashoffset: 36; }
        }

        /* Nodo central */
        .central-node {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 28px 38px;
            border-radius: 65px;
            text-align: center;
            font-size: 20px;
            font-weight: bold;
            box-shadow: 0 20px 50px rgba(102, 126, 234, 0.4);
            z-index: 5;
            min-width: 320px;
            border: 5px solid white;
            line-height: 1.3;
        }

        /* Contenedor de ramas principales */
        .branches-layout {
            position: relative;
            width: 100%;
            height: 100%;
        }

        /* Ramas principales */
        .main-branch {
            position: absolute;
            background: white;
            border-radius: 16px;
            padding: 16px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
            border-left: 6px solid;
            transition: all 0.3s ease;
            z-index: 3;
            width: 280px;
            cursor: move;
            user-select: none;
        }

        .main-branch:hover {
            transform: scale(1.05) translateY(-2px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.25);
            z-index: 4;
        }

        .main-branch.dragging {
            transform: scale(1.08);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.35);
            z-index: 6;
            opacity: 0.9;
        }

        .main-branch h3 {
            font-size: 16px;
            margin-bottom: 14px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 700;
            line-height: 1.3;
        }

        .main-branch ul {
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .main-branch li {
            margin-bottom: 9px;
            padding-left: 14px;
            position: relative;
            line-height: 1.4;
            font-size: 11px;
        }

        .main-branch li:last-child {
            margin-bottom: 0;
        }

        .main-branch li:before {
            content: "üß†";
            position: absolute;
            left: 0;
            font-size: 10px;
        }

        .main-branch strong {
            font-size: 11px;
            font-weight: 600;
        }

        .algorithm-info {
            font-size: 9px;
            color: #666;
            font-style: italic;
            margin-top: 2px;
            padding-left: 8px;
        }

        .year {
            background: rgba(102, 126, 234, 0.15);
            padding: 2px 5px;
            border-radius: 4px;
            font-size: 9px;
            margin-left: 4px;
            color: #667eea;
            font-weight: 600;
        }

        .performance {
            background: rgba(46, 204, 113, 0.2);
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 8px;
            margin-left: 4px;
            color: #27ae60;
            font-weight: 600;
        }

        .dataset {
            background: rgba(230, 126, 34, 0.15);
            padding: 2px 5px;
            border-radius: 3px;
            font-size: 8px;
            margin-left: 4px;
            color: #e67e22;
            font-weight: 500;
        }

        .model-type {
            background: rgba(155, 89, 182, 0.15);
            padding: 2px 5px;
            border-radius: 3px;
            font-size: 8px;
            margin-left: 4px;
            color: #9b59b6;
            font-weight: 500;
        }

        .icon {
            width: 20px;
            height: 20px;
            display: inline-block;
        }

        /* Posicionamiento inicial */
        .branch-1 { top: 3%; left: 3%; }      /* Transformer Foundation */
        .branch-2 { top: 3%; right: 3%; }     /* BERT y Variantes */
        .branch-3 { top: 22%; left: 1%; }     /* GPT y LLMs */
        .branch-4 { top: 22%; right: 1%; }    /* Multimodales */
        .branch-5 { top: 42%; left: 1%; }     /* Espa√±ol Espec√≠fico */
        .branch-6 { top: 42%; right: 1%; }    /* Fine-tuning */
        .branch-7 { top: 62%; left: 1%; }     /* Ensemble & Hybrid */
        .branch-8 { top: 62%; right: 1%; }    /* Evaluaci√≥n */
        .branch-9 { bottom: 22%; left: 1%; }  /* Desaf√≠os */
        .branch-10 { bottom: 22%; right: 1%; } /* Futuras Direcciones */

        /* Colores espec√≠ficos para cada rama */
        .transformer-foundation { border-left-color: #667eea; }
        .transformer-foundation h3, .transformer-foundation li:before { color: #667eea; }

        .bert-variants { border-left-color: #764ba2; }
        .bert-variants h3, .bert-variants li:before { color: #764ba2; }

        .gpt-llms { border-left-color: #f093fb; }
        .gpt-llms h3, .gpt-llms li:before { color: #f093fb; }

        .multimodal { border-left-color: #4ecdc4; }
        .multimodal h3, .multimodal li:before { color: #4ecdc4; }

        .spanish-specific { border-left-color: #ff6b6b; }
        .spanish-specific h3, .spanish-specific li:before { color: #ff6b6b; }

        .fine-tuning { border-left-color: #45b7d1; }
        .fine-tuning h3, .fine-tuning li:before { color: #45b7d1; }

        .ensemble-hybrid { border-left-color: #f9ca24; }
        .ensemble-hybrid h3, .ensemble-hybrid li:before { color: #f9ca24; }

        .evaluation { border-left-color: #6c5ce7; }
        .evaluation h3, .evaluation li:before { color: #6c5ce7; }

        .challenges { border-left-color: #e17055; }
        .challenges h3, .challenges li:before { color: #e17055; }

        .future { border-left-color: #00b894; }
        .future h3, .future li:before { color: #00b894; }

        .footer {
            text-align: center;
            margin-top: 10px;
            font-size: 11px;
            color: #2c3e50;
            padding: 10px;
            background: rgba(102, 126, 234, 0.08);
            border-radius: 10px;
            line-height: 1.4;
            z-index: 10;
            position: relative;
        }

        .footer .title {
            font-weight: 600;
            font-size: 12px;
            color: #34495e;
            margin-bottom: 4px;
        }

        .footer .author {
            font-weight: 500;
            color: #7f8c8d;
            font-size: 11px;
        }

        /* Animaciones de entrada */
        .main-branch {
            animation: branchAppear 0.8s ease forwards;
            opacity: 0;
            transform: scale(0.3);
        }

        .main-branch.branch-1 { animation-delay: 0.1s; }
        .main-branch.branch-2 { animation-delay: 0.2s; }
        .main-branch.branch-3 { animation-delay: 0.3s; }
        .main-branch.branch-4 { animation-delay: 0.4s; }
        .main-branch.branch-5 { animation-delay: 0.5s; }
        .main-branch.branch-6 { animation-delay: 0.6s; }
        .main-branch.branch-7 { animation-delay: 0.7s; }
        .main-branch.branch-8 { animation-delay: 0.8s; }
        .main-branch.branch-9 { animation-delay: 0.9s; }
        .main-branch.branch-10 { animation-delay: 1.0s; }

        @keyframes branchAppear {
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .central-node {
            animation: centralPulse 4s ease-in-out infinite;
        }

        @keyframes centralPulse {
            0%, 100% { transform: translate(-50%, -50%) scale(1); }
            50% { transform: translate(-50%, -50%) scale(1.02); }
        }

        /* Bot√≥n para guardar posiciones */
        .save-positions-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 10px 18px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            z-index: 10;
            font-weight: 600;
        }

        .save-positions-btn:hover {
            background: linear-gradient(135deg, #5a6fd8, #6a4190);
        }

        /* Indicador de instrucciones */
        .instructions {
            position: absolute;
            top: 10px;
            left: 10px;
            background: rgba(52, 73, 94, 0.9);
            color: white;
            padding: 10px 18px;
            border-radius: 6px;
            font-size: 12px;
            z-index: 10;
        }

        /* Responsive */
        @media (max-width: 1400px) {
            .main-branch {
                width: 260px;
                padding: 14px;
            }
            
            .central-node {
                min-width: 300px;
                padding: 24px 34px;
                font-size: 18px;
            }
        }

        @media (max-width: 1200px) {
            .main-branch {
                width: 240px;
                padding: 12px;
            }
            
            .main-branch h3 {
                font-size: 14px;
            }
            
            .main-branch li {
                font-size: 10px;
            }
            
            .central-node {
                min-width: 280px;
                padding: 20px 30px;
                font-size: 16px;
            }
        }
    </style>
</head>
<body>
    <div class="mindmap-container">
        <div class="instructions">
            üß† Arrastra los modelos para reorganizar
        </div>
        
        <button class="save-positions-btn" onclick="savePositions()">
            üíæ Guardar Layout
        </button>
        
        <div class="header">
            <h1>Modelos de Lenguaje en Detecci√≥n de Noticias Falsas</h1>
            <p class="subtitle">Estado del Arte: Arquitecturas, Aplicaciones y Evaluaciones</p>
        </div>
        
        <div class="mindmap-content">
            <!-- SVG para l√≠neas conectivas -->
            <svg class="connections-svg" id="connectionsSvg">
                <!-- Las l√≠neas se dibujar√°n din√°micamente con JavaScript -->
            </svg>

            <div class="branches-layout">
                <!-- Nodo central -->
                <div class="central-node" id="centralNode">
                    üß† MODELOS DE<br>LENGUAJE PARA<br>DETECCI√ìN
                </div>

                <!-- Ramas principales -->
                <div class="main-branch transformer-foundation branch-1" data-branch="1">
                    <h3>
                        <span class="icon">üèóÔ∏è</span>
                        Fundamentos Transformer
                    </h3>
                    <ul>
                        <li><strong>Attention Is All You Need:</strong> Vaswani et al. <span class="year">2017</span>
                            <div class="algorithm-info">Revolucion√≥ PLN con mecanismo de atenci√≥n</div>
                        </li>
                        <li><strong>Atenci√≥n Multi-Cabeza:</strong>
                            <div class="algorithm-info">Queries, Keys, Values ‚Ä¢ Parallelizaci√≥n</div>
                        </li>
                        <li><strong>Arquitectura:</strong>
                            <div class="algorithm-info">‚Ä¢ Encoder-Decoder<br/>‚Ä¢ Positional Encoding<br/>‚Ä¢ Feed-Forward Networks</div>
                        </li>
                        <li><strong>Impacto:</strong> Base para BERT, GPT, T5
                            <div class="algorithm-info">Elimin√≥ dependencias secuenciales</div>
                        </li>
                    </ul>
                </div>

                <div class="main-branch bert-variants branch-2" data-branch="2">
                    <h3>
                        <span class="icon">ü§ñ</span>
                        BERT y Variantes
                    </h3>
                    <ul>
                        <li><strong>BERT:</strong> Devlin et al. <span class="year">2018</span>
                            <div class="algorithm-info">Bidirectional Encoder Representations</div>
                        </li>
                        <li><strong>DistilBERT:</strong> Sanh et al. <span class="year">2019</span>
                            <div class="algorithm-info">40% m√°s peque√±o, 97% rendimiento</div>
                        </li>
                        <li><strong>TinyBERT:</strong> Jiao et al. <span class="year">2019</span>
                            <div class="algorithm-info">Destilaci√≥n a nivel transformador</div>
                        </li>
                        <li><strong>Aplicaciones en Detecci√≥n:</strong>
                            <div class="algorithm-info">‚Ä¢ Fine-tuning especializado<br/>‚Ä¢ Representaciones contextuales<br/>‚Ä¢ Transfer learning</div>
                        </li>
                    </ul>
                </div>

                <div class="main-branch gpt-llms branch-3" data-branch="3">
                    <h3>
                        <span class="icon">üöÄ</span>
                        GPT y LLMs Modernos
                    </h3>
                    <ul>
                        <li><strong>GPT-3:</strong> Brown et al. <span class="year">2020</span>
                            <div class="algorithm-info">175B par√°metros ‚Ä¢ Few-shot learning</div>
                        </li>
                        <li><strong>LLaMA:</strong> Touvron et al. <span class="year">2023</span>
                            <div class="algorithm-info">Open-source alternative ‚Ä¢ Democratizaci√≥n</div>
                        </li>
                        <li><strong>Constitutional AI:</strong> Bai et al. <span class="year">2022</span>
                            <div class="algorithm-info">Alineaci√≥n y seguridad en LLMs</div>
                        </li>
                        <li><strong>Doble Rol:</strong> Hu et al. <span class="year">2024</span>
                            <div class="algorithm-info">‚Ä¢ Buenos detectores<br/>‚Ä¢ Generadores de desinformaci√≥n</div>
                        </li>
                    </ul>
                </div>

                <div class="main-branch multimodal branch-4" data-branch="4">
                    <h3>
                        <span class="icon">üåê</span>
                        Modelos Multimodales
                    </h3>
                    <ul>
                        <li><strong>Gemini:</strong> Google Team <span class="year">2023</span>
                            <div class="algorithm-info">Texto, imagen, audio integrados</div>
                        </li>
                        <li><strong>Capacidades Nativas:</strong>
                            <div class="algorithm-info">‚Ä¢ Procesamiento conjunto<br/>‚Ä¢ Comprensi√≥n contextual<br/>‚Ä¢ An√°lisis cross-modal</div>
                        </li>
                        <li><strong>Detecci√≥n Avanzada:</strong>
                            <div class="algorithm-info">Memes, videos, contenido mixto</div>
                        </li>
                        <li><strong>Futuro de la Detecci√≥n:</strong>
                            <div class="algorithm-info">An√°lisis hol√≠stico de desinformaci√≥n</div>
                        </li>
                    </ul>
                </div>

                <div class="main-branch spanish-specific branch-5" data-branch="5">
                    <h3>
                        <span class="icon">üá™üá∏</span>
                        Modelos para Espa√±ol
                    </h3>
                    <ul>
                        <li><strong>BERT + BETO:</strong> Mart√≠nez-Gallego et al. <span class="year">2021</span>
                            <div class="algorithm-info">Evaluaci√≥n sistem√°tica espa√±ol</div>
                        </li>
                        <li><strong>BERT vs RoBERTa:</strong> Blanco-Fern√°ndez et al. <span class="year">2024</span>
                            <div class="algorithm-info">Desinformaci√≥n pol√≠tica <span class="dataset">Spanish Political</span></div>
                        </li>
                        <li><strong>ChatGPT Augmentation:</strong> Shushkevich et al. <span class="year">2023</span>
                            <div class="algorithm-info">Datos aumentados multiclase</div>
                        </li>
                        <li><strong>Desaf√≠os Espec√≠ficos:</strong>
                            <div class="algorithm-info">‚Ä¢ Variedades dialectales<br/>‚Ä¢ Contexto cultural<br/>‚Ä¢ Corpus limitados</div>
                        </li>
                    </ul>
                </div>

                <div class="main-branch fine-tuning branch-6" data-branch="6">
                    <h3>
                        <span class="icon">‚ö°</span>
                        Fine-tuning y Adaptaci√≥n
                    </h3>
                    <ul>
                        <li><strong>Knowledge-Enhanced:</strong> Whitehouse et al. <span class="year">2022</span>
                            <div class="algorithm-info">Modelos con conocimiento externo</div>
                        </li>
                        <li><strong>Domain Adaptation:</strong>
                            <div class="algorithm-info">‚Ä¢ Transferencia espec√≠fica<br/>‚Ä¢ Ajuste gradual<br/>‚Ä¢ Preservaci√≥n conocimiento</div>
                        </li>
                        <li><strong>Estrategias Eficientes:</strong>
                            <div class="algorithm-info">‚Ä¢ Layer freezing<br/>‚Ä¢ Learning rate scheduling<br/>‚Ä¢ Gradient accumulation</div>
                        </li>
                        <li><strong>Evaluaci√≥n:</strong> <span class="dataset">LIAR</span> <span class="dataset">CoAID</span> <span class="dataset">FakeNews</span>
                            <div class="algorithm-info">Benchmarks especializados</div>
                        </li>
                    </ul>
                </div>

                <div class="main-branch ensemble-hybrid branch-7" data-branch="7">
                    <h3>
                        <span class="icon">üîó</span>
                        Ensemble y H√≠bridos
                    </h3>
                    <ul>
                        <li><strong>Uncertainty-based Framework:</strong> Das et al. <span class="year">2022</span>
                            <div class="algorithm-info">Ensemble heur√≠stico <span class="performance">95% F1</span></div>
                        </li>
                        <li><strong>Componentes H√≠bridos:</strong>
                            <div class="algorithm-info">‚Ä¢ BERT + metadatos<br/>‚Ä¢ Caracter√≠sticas estad√≠sticas<br/>‚Ä¢ Heur√≠sticas incertidumbre</div>
                        </li>
                        <li><strong>Deep Learning Approach:</strong> Thota et al. <span class="year">2018</span>
                            <div class="algorithm-info">TF-IDF + redes neuronales</div>
                        </li>
                        <li><strong>Ventajas:</strong>
                            <div class="algorithm-info">‚Ä¢ Robustez mejorada<br/>‚Ä¢ Reducci√≥n overfitting<br/>‚Ä¢ Mejor generalizaci√≥n</div>
                        </li>
                    </ul>
                </div>

                <div class="main-branch evaluation branch-8" data-branch="8">
                    <h3>
                        <span class="icon">üìä</span>
                        Evaluaci√≥n y M√©tricas
                    </h3>
                    <ul>
                        <li><strong>Comprehensive Reviews:</strong>
                            <div class="algorithm-info">Hu et al. ‚Ä¢ Mridha et al. ‚Ä¢ Singh et al.</div>
                        </li>
                        <li><strong>M√©tricas Principales:</strong>
                            <div class="algorithm-info">‚Ä¢ F1-Score<br/>‚Ä¢ AUC-ROC<br/>‚Ä¢ Precisi√≥n/Recall</div>
                        </li>
                        <li><strong>Datasets Benchmark:</strong>
                            <div class="algorithm-info"><span class="dataset">BuzzFeedNews</span> <span class="dataset">CREDBANK</span> <span class="dataset">LIAR</span></div>
                        </li>
                        <li><strong>Validaci√≥n Cruzada:</strong>
                            <div class="algorithm-info">K-fold ‚Ä¢ Cross-domain ‚Ä¢ Temporal</div>
                        </li>
                    </ul>
                </div>

                <div class="main-branch challenges branch-9" data-branch="9">
                    <h3>
                        <span class="icon">‚ö†Ô∏è</span>
                        Desaf√≠os Actuales
                    </h3>
                    <ul>
                        <li><strong>Era LLM:</strong> Su et al. <span class="year">2023</span>
                            <div class="algorithm-info">Adaptaci√≥n necesaria detectores</div>
                        </li>
                        <li><strong>Bias contra LLMs:</strong> Su et al. <span class="year">2023</span>
                            <div class="algorithm-info">Detectores sesgados vs texto IA</div>
                        </li>
                        <li><strong>Adversarial Robustness:</strong>
                            <div class="algorithm-info">‚Ä¢ Ataques sofisticados<br/>‚Ä¢ Evasi√≥n detectores<br/>‚Ä¢ Robustez temporal</div>
                        </li>
                        <li><strong>Explicabilidad:</strong>
                            <div class="algorithm-info">Decisiones interpretables cr√≠ticas</div>
                        </li>
                    </ul>
                </div>

                <div class="main-branch future branch-10" data-branch="10">
                    <h3>
                        <span class="icon">üîÆ</span>
                        Direcciones Futuras
                    </h3>
                    <ul>
                        <li><strong>LLMs para Optimizaci√≥n:</strong> Zhang et al. <span class="year">2023</span>
                            <div class="algorithm-info">Hyperparameter tuning autom√°tico</div>
                        </li>
                        <li><strong>Arquitecturas Emergentes:</strong>
                            <div class="algorithm-info">‚Ä¢ Mamba ‚Ä¢ RetNet ‚Ä¢ Mixture of Experts</div>
                        </li>
                        <li><strong>Real-time Detection:</strong>
                            <div class="algorithm-info">‚Ä¢ Streaming processing<br/>‚Ä¢ Edge deployment<br/>‚Ä¢ Low-latency inference</div>
                        </li>
                        <li><strong>Ethical AI:</strong>
                            <div class="algorithm-info">‚Ä¢ Fairness ‚Ä¢ Transparency ‚Ä¢ Privacy</div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="footer">
            <div class="title">Modelos de Lenguaje en Detecci√≥n de Noticias Falsas: Evoluci√≥n y Estado Actual</div>
            <div class="author">Gabriel Hurtado Avil√©s ‚Ä¢ UAM Azcapotzalco ‚Ä¢ Revisi√≥n Literatura 2024</div>
        </div>
    </div>

    <script>
        // Variables para el sistema de arrastre
        let isDragging = false;
        let currentElement = null;
        let startX, startY, elementX, elementY;

        // Inicializaci√≥n
        document.addEventListener('DOMContentLoaded', function() {
            initializeDragAndDrop();
            loadSavedPositions();
            updateConnections();
        });

        function initializeDragAndDrop() {
            const branches = document.querySelectorAll('.main-branch');
            
            branches.forEach(branch => {
                branch.addEventListener('mousedown', startDrag);
                branch.addEventListener('touchstart', startDrag, { passive: false });
            });

            document.addEventListener('mousemove', drag);
            document.addEventListener('touchmove', drag, { passive: false });
            document.addEventListener('mouseup', endDrag);
            document.addEventListener('touchend', endDrag);
        }

        function startDrag(e) {
            e.preventDefault();
            isDragging = true;
            currentElement = e.currentTarget;
            currentElement.classList.add('dragging');

            const clientX = e.type === 'touchstart' ? e.touches[0].clientX : e.clientX;
            const clientY = e.type === 'touchstart' ? e.touches[0].clientY : e.clientY;

            startX = clientX;
            startY = clientY;

            const rect = currentElement.getBoundingClientRect();
            const containerRect = currentElement.parentElement.getBoundingClientRect();
            
            elementX = rect.left - containerRect.left;
            elementY = rect.top - containerRect.top;
        }

        function drag(e) {
            if (!isDragging || !currentElement) return;
            
            e.preventDefault();
            
            const clientX = e.type === 'touchmove' ? e.touches[0].clientX : e.clientX;
            const clientY = e.type === 'touchmove' ? e.touches[0].clientY : e.clientY;

            const deltaX = clientX - startX;
            const deltaY = clientY - startY;

            const newX = elementX + deltaX;
            const newY = elementY + deltaY;

            // Limitar el movimiento dentro del contenedor
            const container = currentElement.parentElement;
            const containerRect = container.getBoundingClientRect();
            const elementRect = currentElement.getBoundingClientRect();

            const maxX = containerRect.width - elementRect.width;
            const maxY = containerRect.height - elementRect.height;

            const constrainedX = Math.max(0, Math.min(newX, maxX));
            const constrainedY = Math.max(0, Math.min(newY, maxY));

            currentElement.style.left = constrainedX + 'px';
            currentElement.style.top = constrainedY + 'px';
            currentElement.style.right = 'auto';
            currentElement.style.bottom = 'auto';

            // Actualizar las l√≠neas de conexi√≥n en tiempo real
            updateConnections();
        }

        function endDrag() {
            if (currentElement) {
                currentElement.classList.remove('dragging');
                currentElement = null;
            }
            isDragging = false;
        }

        function updateConnections() {
            const svg = document.getElementById('connectionsSvg');
            const centralNode = document.getElementById('centralNode');
            const branches = document.querySelectorAll('.main-branch');
            
            // Limpiar l√≠neas existentes
            svg.innerHTML = '';

            // Obtener el centro del nodo central
            const centralRect = centralNode.getBoundingClientRect();
            const containerRect = svg.getBoundingClientRect();
            
            const centralX = (centralRect.left + centralRect.width / 2 - containerRect.left) / containerRect.width * 100;
            const centralY = (centralRect.top + centralRect.height / 2 - containerRect.top) / containerRect.height * 100;

            // Colores para cada rama
            const colors = ['#667eea', '#764ba2', '#f093fb', '#4ecdc4', '#ff6b6b', '#45b7d1', '#f9ca24', '#6c5ce7', '#e17055', '#00b894'];

            branches.forEach((branch, index) => {
                const branchRect = branch.getBoundingClientRect();
                const branchX = (branchRect.left + branchRect.width / 2 - containerRect.left) / containerRect.width * 100;
                const branchY = (branchRect.top + branchRect.height / 2 - containerRect.top) / containerRect.height * 100;

                // Crear l√≠nea SVG
                const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                line.setAttribute('class', 'connection-line');
                line.setAttribute('x1', centralX + '%');
                line.setAttribute('y1', centralY + '%');
                line.setAttribute('x2', branchX + '%');
                line.setAttribute('y2', branchY + '%');
                line.setAttribute('stroke', colors[index]);

                svg.appendChild(line);
            });
        }

        function savePositions() {
            const positions = {};
            const branches = document.querySelectorAll('.main-branch');
            
            branches.forEach(branch => {
                const branchId = branch.getAttribute('data-branch');
                const rect = branch.getBoundingClientRect();
                const containerRect = branch.parentElement.getBoundingClientRect();
                
                positions[branchId] = {
                    x: rect.left - containerRect.left,
                    y: rect.top - containerRect.top
                };
            });

            localStorage.setItem('mindmapLanguageModelsPositions', JSON.stringify(positions));
            
            // Mostrar confirmaci√≥n
            const btn = document.querySelector('.save-positions-btn');
            const originalText = btn.innerHTML;
            btn.innerHTML = '‚úÖ Layout Guardado';
            btn.style.background = 'linear-gradient(135deg, #00b894, #00a085)';
            
            setTimeout(() => {
                btn.innerHTML = originalText;
                btn.style.background = 'linear-gradient(135deg, #667eea, #764ba2)';
            }, 2000);
        }

        function loadSavedPositions() {
            const savedPositions = localStorage.getItem('mindmapLanguageModelsPositions');
            if (!savedPositions) return;

            const positions = JSON.parse(savedPositions);
            const branches = document.querySelectorAll('.main-branch');

            branches.forEach(branch => {
                const branchId = branch.getAttribute('data-branch');
                if (positions[branchId]) {
                    branch.style.left = positions[branchId].x + 'px';
                    branch.style.top = positions[branchId].y + 'px';
                    branch.style.right = 'auto';
                    branch.style.bottom = 'auto';
                }
            });
        }

        // Actualizar conexiones cuando se redimensiona la ventana
        window.addEventListener('resize', updateConnections);
    </script>
</body>
</html>